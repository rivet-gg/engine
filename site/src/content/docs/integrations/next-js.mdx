import { Hosting } from "@/components/docs/Hosting";
import { InstallPackage } from "@/components/docs/InstallPackage";

# Next.js

Next.js is a powerful React framework that allows you to build server-rendered applications with ease. The Rivet Next.js client enables you to connect to and interact with actors in your Next.js applications.

<CardGroup>
<Card title="View Example on GitHub" icon="github" href="https://github.com/rivet-gg/rivetkit/tree/main/examples/next-js">
	Check out the complete example
</Card>
<Card title="View client integration" icon="github" href="https://rivet.gg/docs/clients/next-js/">
	Use the RivetKit React client to connect to actors
</Card>
</CardGroup>

## Basic Usage

<Steps>

<Step title="Installation">
  
Install the RivetKit Next.js package:
<InstallPackage name="rivetkit @rivetkit/next-js" />

</Step>

<Step title="Create an Actor">

Create a simple counter actor:

```ts {{"title":"src/rivet/registry.ts"}}
import { actor, setup } from "rivetkit";

export const counter = actor({
	state: { count: 0 },
	actions: {
		increment: (c, amount: number = 1) => {
			c.state.count += amount;
			c.broadcast("countChanged", c.state.count);
			return c.state.count;
		},
		getCount: (c) => c.state.count,
	},
});

export const registry = setup({
	use: { counter },
});
```

</Step>

<Step title="Setup Registry API routes">

```ts {{"title":"src/app/api/rivet/[...all]/route.ts"}}
import { toNextHandler } from "@rivetkit/next-js";
import { registry } from "@/rivet/registry";

// Export the Next.js handler for the API routes
export const { GET, POST, HEAD, PATCH, OPTIONS } = toNextHandler(registry);
```

</Step>
</Steps>

## API Reference

### `toNextHandler`
Converts a RivetKit server to a Next.js handler for API routes.

```ts
import { actor, setup } from "rivetkit";
import { toNextHandler } from "@rivetkit/next-js";

const counter = actor({
	state: {},
	actions: {
		/* your actions here */
	},
});

const registry = setup({
	use: { counter },
});

export const { GET, POST, HEAD, PATCH, OPTIONS } = toNextHandler(registry);
```

#### Parameters
- `server`: The RivetKit server instance created from your registry.

#### Returns
- An object containing Next.js-compatible handlers for the HTTP methods.
