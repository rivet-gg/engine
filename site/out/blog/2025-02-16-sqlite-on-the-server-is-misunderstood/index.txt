1:"$Sreact.fragment"
2:I[65327,["1965","static/chunks/f67032f2-9c72234b0d8f41b4.js","8229","static/chunks/9da6db1e-dbfab9261a7c6a02.js","7134","static/chunks/7134-7a2ccc87dc1f1c96.js","9078","static/chunks/9078-9c4b2ff48765f274.js","6855","static/chunks/6855-c97c866fb9680afe.js","3285","static/chunks/3285-d8e61078321bd50f.js","9657","static/chunks/9657-90d7d8e86cd8d7b3.js","1983","static/chunks/1983-7439545cf8f39348.js","7678","static/chunks/7678-80db3db210142fa5.js","3459","static/chunks/3459-aa0b1d8277b7bbbd.js","7177","static/chunks/app/layout-e3cfc449b871f8f6.js"],"GoogleAnalytics"]
3:I[559,["1965","static/chunks/f67032f2-9c72234b0d8f41b4.js","8229","static/chunks/9da6db1e-dbfab9261a7c6a02.js","7134","static/chunks/7134-7a2ccc87dc1f1c96.js","9078","static/chunks/9078-9c4b2ff48765f274.js","6855","static/chunks/6855-c97c866fb9680afe.js","3285","static/chunks/3285-d8e61078321bd50f.js","9657","static/chunks/9657-90d7d8e86cd8d7b3.js","1983","static/chunks/1983-7439545cf8f39348.js","7678","static/chunks/7678-80db3db210142fa5.js","3459","static/chunks/3459-aa0b1d8277b7bbbd.js","7177","static/chunks/app/layout-e3cfc449b871f8f6.js"],""]
4:I[32761,["1965","static/chunks/f67032f2-9c72234b0d8f41b4.js","7134","static/chunks/7134-7a2ccc87dc1f1c96.js","9078","static/chunks/9078-9c4b2ff48765f274.js","6855","static/chunks/6855-c97c866fb9680afe.js","5051","static/chunks/5051-51ff92d736937f41.js","9657","static/chunks/9657-90d7d8e86cd8d7b3.js","1983","static/chunks/1983-7439545cf8f39348.js","7678","static/chunks/7678-80db3db210142fa5.js","3545","static/chunks/3545-9e4a648ea2701538.js","35","static/chunks/app/(v2)/(blog)/blog/page-6e2380a8fbf5f3da.js"],"TooltipProvider"]
5:I[79838,["1965","static/chunks/f67032f2-9c72234b0d8f41b4.js","8229","static/chunks/9da6db1e-dbfab9261a7c6a02.js","7134","static/chunks/7134-7a2ccc87dc1f1c96.js","9078","static/chunks/9078-9c4b2ff48765f274.js","6855","static/chunks/6855-c97c866fb9680afe.js","3285","static/chunks/3285-d8e61078321bd50f.js","9657","static/chunks/9657-90d7d8e86cd8d7b3.js","1983","static/chunks/1983-7439545cf8f39348.js","7678","static/chunks/7678-80db3db210142fa5.js","3459","static/chunks/3459-aa0b1d8277b7bbbd.js","7177","static/chunks/app/layout-e3cfc449b871f8f6.js"],"Providers"]
6:I[49287,[],""]
7:I[34235,[],""]
8:I[91971,["1965","static/chunks/f67032f2-9c72234b0d8f41b4.js","7134","static/chunks/7134-7a2ccc87dc1f1c96.js","9078","static/chunks/9078-9c4b2ff48765f274.js","6855","static/chunks/6855-c97c866fb9680afe.js","5051","static/chunks/5051-51ff92d736937f41.js","9657","static/chunks/9657-90d7d8e86cd8d7b3.js","1983","static/chunks/1983-7439545cf8f39348.js","7678","static/chunks/7678-80db3db210142fa5.js","3545","static/chunks/3545-9e4a648ea2701538.js","35","static/chunks/app/(v2)/(blog)/blog/page-6e2380a8fbf5f3da.js"],"Toaster"]
9:I[82345,["7134","static/chunks/7134-7a2ccc87dc1f1c96.js","9078","static/chunks/9078-9c4b2ff48765f274.js","3591","static/chunks/3591-193e430a542376f5.js","4395","static/chunks/4395-09a8f40ef66f9d5c.js","9657","static/chunks/9657-90d7d8e86cd8d7b3.js","1983","static/chunks/1983-7439545cf8f39348.js","7261","static/chunks/7261-eddb3e7984c54a8d.js","5212","static/chunks/app/(v2)/(blog)/blog/layout-04840f1e5a481f10.js"],"Header"]
a:I[59534,["1965","static/chunks/f67032f2-9c72234b0d8f41b4.js","7134","static/chunks/7134-7a2ccc87dc1f1c96.js","9078","static/chunks/9078-9c4b2ff48765f274.js","6855","static/chunks/6855-c97c866fb9680afe.js","5051","static/chunks/5051-51ff92d736937f41.js","9657","static/chunks/9657-90d7d8e86cd8d7b3.js","1983","static/chunks/1983-7439545cf8f39348.js","7678","static/chunks/7678-80db3db210142fa5.js","3545","static/chunks/3545-9e4a648ea2701538.js","35","static/chunks/app/(v2)/(blog)/blog/page-6e2380a8fbf5f3da.js"],""]
b:"$Sreact.suspense"
c:I[82813,["7134","static/chunks/7134-7a2ccc87dc1f1c96.js","9657","static/chunks/9657-90d7d8e86cd8d7b3.js","3459","static/chunks/3459-aa0b1d8277b7bbbd.js","5519","static/chunks/app/(v2)/layout-24f9ee0b53a6742c.js"],"EmbedDetector"]
d:I[53696,["7134","static/chunks/7134-7a2ccc87dc1f1c96.js","9657","static/chunks/9657-90d7d8e86cd8d7b3.js","3459","static/chunks/3459-aa0b1d8277b7bbbd.js","5519","static/chunks/app/(v2)/layout-24f9ee0b53a6742c.js"],"Footer"]
f:I[93621,[],"MetadataBoundary"]
11:I[93621,[],"OutletBoundary"]
14:I[16867,[],"AsyncMetadataOutlet"]
16:I[93621,[],"ViewportBoundary"]
18:I[27890,[],""]
:HL["/_next/static/css/565f4925fe90494c.css","style"]
:HL["/_next/static/css/b2a053553e69c47d.css","style"]
:HL["/_next/static/css/9ded352fd1582faa.css","style"]
0:{"P":null,"b":"xyrr8R3WCFgaolPiXJ-Nn","p":"","c":["","blog","2025-02-16-sqlite-on-the-server-is-misunderstood",""],"i":false,"f":[[["",{"children":["(v2)",{"children":["(blog)",{"children":["blog",{"children":[["slug","2025-02-16-sqlite-on-the-server-is-misunderstood","c"],{"children":["__PAGE__",{}]}]}]}]}]},"$undefined","$undefined",true],["",["$","$1","c",{"children":[[["$","link","0",{"rel":"stylesheet","href":"/_next/static/css/565f4925fe90494c.css","precedence":"next","crossOrigin":"$undefined","nonce":"$undefined"}]],["$","html",null,{"lang":"en","className":"dark","children":[["$","head",null,{"children":[["$","$L2",null,{"gaId":"G-GHX1328ZFD"}],["$","$L3",null,{"src":"https://analytics.ahrefs.com/analytics.js","data-key":"wQAsHie9RgJMLNhmUbr/fQ","strategy":"beforeInteractive"}],["$","link",null,{"rel":"apple-touch-icon","sizes":"180x180","href":"/icons/apple-touch-icon.png?20240925"}],["$","link",null,{"rel":"icon","type":"image/png","sizes":"32x32","href":"/icons/favicon-32x32.png?20240925"}],["$","link",null,{"rel":"icon","type":"image/png","sizes":"16x16","href":"/icons/favicon-16x16.png?20240925"}],["$","link",null,{"rel":"manifest","href":"/icons/site.webmanifest?20240925"}],["$","link",null,{"rel":"mask-icon","href":"/icons/safari-pinned-tab.svg?20240925","color":"#5bbad5"}],["$","meta",null,{"name":"msapplication-TileColor","content":"#0c0a09"}],["$","meta",null,{"name":"theme-color","content":"#0c0a09"}],["$","meta",null,{"name":"viewport","content":"width=device-width, initial-scale=1.0"}]]}],["$","body",null,{"className":"dark","children":[["$","$L4",null,{"children":["$","$L5",null,{"children":["$","$L6",null,{"parallelRouterKey":"children","error":"$undefined","errorStyles":"$undefined","errorScripts":"$undefined","template":["$","$L7",null,{}],"templateStyles":"$undefined","templateScripts":"$undefined","notFound":[[["$","title",null,{"children":"404: This page could not be found."}],["$","div",null,{"style":{"fontFamily":"system-ui,\"Segoe UI\",Roboto,Helvetica,Arial,sans-serif,\"Apple Color Emoji\",\"Segoe UI Emoji\"","height":"100vh","textAlign":"center","display":"flex","flexDirection":"column","alignItems":"center","justifyContent":"center"},"children":["$","div",null,{"children":[["$","style",null,{"dangerouslySetInnerHTML":{"__html":"body{color:#000;background:#fff;margin:0}.next-error-h1{border-right:1px solid rgba(0,0,0,.3)}@media (prefers-color-scheme:dark){body{color:#fff;background:#000}.next-error-h1{border-right:1px solid rgba(255,255,255,.3)}}"}}],["$","h1",null,{"className":"next-error-h1","style":{"display":"inline-block","margin":"0 20px 0 0","padding":"0 23px 0 0","fontSize":24,"fontWeight":500,"verticalAlign":"top","lineHeight":"49px"},"children":404}],["$","div",null,{"style":{"display":"inline-block"},"children":["$","h2",null,{"style":{"fontSize":14,"fontWeight":400,"lineHeight":"49px","margin":0},"children":"This page could not be found."}]}]]}]}]],[]],"forbidden":"$undefined","unauthorized":"$undefined"}]}]}],["$","$L8",null,{"theme":"system","className":"toaster group right-8","toastOptions":{"classNames":{"toast":"group toast group-[.toaster]:bg-card group-[.toaster]:text-foreground group-[.toaster]:border-border group-[.toaster]:shadow-lg group-[.toaster]:border group-[.toaster]:rounded-md","description":"group-[.toast]:text-muted-foreground","actionButton":"group-[.toast]:bg-primary group-[.toast]:text-primary-foreground","cancelButton":"group-[.toast]:bg-muted group-[.toast]:text-muted-foreground"}}}]]}]]}]]}],{"children":["(v2)",["$","$1","c",{"children":[[["$","link","0",{"rel":"stylesheet","href":"/_next/static/css/b2a053553e69c47d.css","precedence":"next","crossOrigin":"$undefined","nonce":"$undefined"}],["$","link","1",{"rel":"stylesheet","href":"/_next/static/css/9ded352fd1582faa.css","precedence":"next","crossOrigin":"$undefined","nonce":"$undefined"}]],[["$","$L6",null,{"parallelRouterKey":"children","error":"$undefined","errorStyles":"$undefined","errorScripts":"$undefined","template":["$","$L7",null,{}],"templateStyles":"$undefined","templateScripts":"$undefined","notFound":[[["$","$L9",null,{"variant":"floating"}],["$","div",null,{"className":"relative flex min-h-[80vh] w-full items-center justify-center text-center","children":["$","div",null,{"className":"transition-opacity","children":[["$","h1",null,{"className":"mb-3 flex items-center justify-center text-3xl text-white","children":[["$","svg",null,{"aria-hidden":"true","focusable":"false","data-prefix":"fas","data-icon":"block-question","className":"svg-inline--fa fa-block-question mr-2 size-10","role":"img","xmlns":"http://www.w3.org/2000/svg","viewBox":"0 0 448 512","style":{},"ref":"$undefined","children":["$","path",null,{"fill":"currentColor","d":"M64 32C28.7 32 0 60.7 0 96L0 416c0 35.3 28.7 64 64 64l320 0c35.3 0 64-28.7 64-64l0-320c0-35.3-28.7-64-64-64L64 32zm73.8 149.3c7.9-22.3 29.1-37.3 52.8-37.3l58.3 0c34.9 0 63.1 28.3 63.1 63.1c0 22.6-12.1 43.5-31.7 54.8L248 280.4c-.2 13-10.9 23.6-24 23.6c-13.3 0-24-10.7-24-24l0-13.5c0-8.6 4.6-16.5 12.1-20.8l44.3-25.4c4.7-2.7 7.6-7.7 7.6-13.1c0-8.4-6.8-15.1-15.1-15.1l-58.3 0c-3.4 0-6.4 2.1-7.5 5.3l-.4 1.2c-4.4 12.5-18.2 19-30.6 14.6s-19-18.2-14.6-30.6l.4-1.2zM192 368a32 32 0 1 1 64 0 32 32 0 1 1 -64 0zM48 104a24 24 0 1 1 48 0 24 24 0 1 1 -48 0zM376 80a24 24 0 1 1 0 48 24 24 0 1 1 0-48zM48 408a24 24 0 1 1 48 0 24 24 0 1 1 -48 0zm328-24a24 24 0 1 1 0 48 24 24 0 1 1 0-48z","style":{}}]}]," ","Not Found"]}],["$","$La",null,{"aria-selected":false,"className":"relative inline-flex items-center justify-center gap-0.5 overflow-hidden font-semibold transition inline-flex items-center justify-center gap-0.5 rounded-sm px-3 py-1 text-sm font-semibold bg-transparent text-cream-100 border-2 border-cream-100 hover:bg-cream-100 hover:text-charcole-950","href":"/","children":[null,false,"Home",false]}]]}]}]],[]],"forbidden":"$undefined","unauthorized":"$undefined"}],["$","$b",null,{"children":["$","$Lc",null,{}]}],["$","$Ld",null,{}]]]}],{"children":["(blog)",["$","$1","c",{"children":[null,["$","$L6",null,{"parallelRouterKey":"children","error":"$undefined","errorStyles":"$undefined","errorScripts":"$undefined","template":["$","$L7",null,{}],"templateStyles":"$undefined","templateScripts":"$undefined","notFound":"$undefined","forbidden":"$undefined","unauthorized":"$undefined"}]]}],{"children":["blog",["$","$1","c",{"children":[null,[["$","$L9",null,{"active":"blog","variant":"floating"}],["$","$L6",null,{"parallelRouterKey":"children","error":"$undefined","errorStyles":"$undefined","errorScripts":"$undefined","template":["$","$L7",null,{}],"templateStyles":"$undefined","templateScripts":"$undefined","notFound":"$undefined","forbidden":"$undefined","unauthorized":"$undefined"}]]]}],{"children":[["slug","2025-02-16-sqlite-on-the-server-is-misunderstood","c"],["$","$1","c",{"children":[null,["$","$L6",null,{"parallelRouterKey":"children","error":"$undefined","errorStyles":"$undefined","errorScripts":"$undefined","template":["$","$L7",null,{}],"templateStyles":"$undefined","templateScripts":"$undefined","notFound":"$undefined","forbidden":"$undefined","unauthorized":"$undefined"}]]}],{"children":["__PAGE__",["$","$1","c",{"children":["$Le",["$","$Lf",null,{"children":"$L10"}],null,["$","$L11",null,{"children":["$L12","$L13",["$","$L14",null,{"promise":"$@15"}]]}]]}],{},null,false]},null,false]},null,false]},null,false]},null,false]},null,false],["$","$1","h",{"children":[null,["$","$1","jCCBX18awlGD8kQN-uWZb",{"children":[["$","$L16",null,{"children":"$L17"}],null]}],null]}],false]],"m":"$undefined","G":["$18","$undefined"],"s":false,"S":true}
19:I[16867,[],"AsyncMetadata"]
10:["$","$b",null,{"fallback":null,"children":["$","$L19",null,{"promise":"$@1a"}]}]
13:null
1b:I[1143,["1965","static/chunks/f67032f2-9c72234b0d8f41b4.js","7134","static/chunks/7134-7a2ccc87dc1f1c96.js","9078","static/chunks/9078-9c4b2ff48765f274.js","6855","static/chunks/6855-c97c866fb9680afe.js","5051","static/chunks/5051-51ff92d736937f41.js","9657","static/chunks/9657-90d7d8e86cd8d7b3.js","1983","static/chunks/1983-7439545cf8f39348.js","7678","static/chunks/7678-80db3db210142fa5.js","3545","static/chunks/3545-9e4a648ea2701538.js","35","static/chunks/app/(v2)/(blog)/blog/page-6e2380a8fbf5f3da.js"],"Avatar"]
1c:I[1143,["1965","static/chunks/f67032f2-9c72234b0d8f41b4.js","7134","static/chunks/7134-7a2ccc87dc1f1c96.js","9078","static/chunks/9078-9c4b2ff48765f274.js","6855","static/chunks/6855-c97c866fb9680afe.js","5051","static/chunks/5051-51ff92d736937f41.js","9657","static/chunks/9657-90d7d8e86cd8d7b3.js","1983","static/chunks/1983-7439545cf8f39348.js","7678","static/chunks/7678-80db3db210142fa5.js","3545","static/chunks/3545-9e4a648ea2701538.js","35","static/chunks/app/(v2)/(blog)/blog/page-6e2380a8fbf5f3da.js"],"AvatarFallback"]
1d:I[1143,["1965","static/chunks/f67032f2-9c72234b0d8f41b4.js","7134","static/chunks/7134-7a2ccc87dc1f1c96.js","9078","static/chunks/9078-9c4b2ff48765f274.js","6855","static/chunks/6855-c97c866fb9680afe.js","5051","static/chunks/5051-51ff92d736937f41.js","9657","static/chunks/9657-90d7d8e86cd8d7b3.js","1983","static/chunks/1983-7439545cf8f39348.js","7678","static/chunks/7678-80db3db210142fa5.js","3545","static/chunks/3545-9e4a648ea2701538.js","35","static/chunks/app/(v2)/(blog)/blog/page-6e2380a8fbf5f3da.js"],"AvatarImage"]
20:I[63571,["1965","static/chunks/f67032f2-9c72234b0d8f41b4.js","7134","static/chunks/7134-7a2ccc87dc1f1c96.js","9078","static/chunks/9078-9c4b2ff48765f274.js","6855","static/chunks/6855-c97c866fb9680afe.js","5051","static/chunks/5051-51ff92d736937f41.js","9657","static/chunks/9657-90d7d8e86cd8d7b3.js","1983","static/chunks/1983-7439545cf8f39348.js","7678","static/chunks/7678-80db3db210142fa5.js","3545","static/chunks/3545-9e4a648ea2701538.js","35","static/chunks/app/(v2)/(blog)/blog/page-6e2380a8fbf5f3da.js"],"Image"]
21:I[75036,["1965","static/chunks/f67032f2-9c72234b0d8f41b4.js","7134","static/chunks/7134-7a2ccc87dc1f1c96.js","9078","static/chunks/9078-9c4b2ff48765f274.js","6855","static/chunks/6855-c97c866fb9680afe.js","5051","static/chunks/5051-51ff92d736937f41.js","9657","static/chunks/9657-90d7d8e86cd8d7b3.js","1983","static/chunks/1983-7439545cf8f39348.js","7678","static/chunks/7678-80db3db210142fa5.js","3545","static/chunks/3545-9e4a648ea2701538.js","35","static/chunks/app/(v2)/(blog)/blog/page-6e2380a8fbf5f3da.js"],"Heading"]
22:I[32761,["1965","static/chunks/f67032f2-9c72234b0d8f41b4.js","7134","static/chunks/7134-7a2ccc87dc1f1c96.js","9078","static/chunks/9078-9c4b2ff48765f274.js","6855","static/chunks/6855-c97c866fb9680afe.js","5051","static/chunks/5051-51ff92d736937f41.js","9657","static/chunks/9657-90d7d8e86cd8d7b3.js","1983","static/chunks/1983-7439545cf8f39348.js","7678","static/chunks/7678-80db3db210142fa5.js","3545","static/chunks/3545-9e4a648ea2701538.js","35","static/chunks/app/(v2)/(blog)/blog/page-6e2380a8fbf5f3da.js"],"WithTooltip"]
23:I[30860,["1965","static/chunks/f67032f2-9c72234b0d8f41b4.js","7134","static/chunks/7134-7a2ccc87dc1f1c96.js","9078","static/chunks/9078-9c4b2ff48765f274.js","6855","static/chunks/6855-c97c866fb9680afe.js","5051","static/chunks/5051-51ff92d736937f41.js","9657","static/chunks/9657-90d7d8e86cd8d7b3.js","1983","static/chunks/1983-7439545cf8f39348.js","7678","static/chunks/7678-80db3db210142fa5.js","3545","static/chunks/3545-9e4a648ea2701538.js","35","static/chunks/app/(v2)/(blog)/blog/page-6e2380a8fbf5f3da.js"],"CopyCodeTrigger"]
24:I[63843,["1965","static/chunks/f67032f2-9c72234b0d8f41b4.js","7134","static/chunks/7134-7a2ccc87dc1f1c96.js","9078","static/chunks/9078-9c4b2ff48765f274.js","6855","static/chunks/6855-c97c866fb9680afe.js","5051","static/chunks/5051-51ff92d736937f41.js","9657","static/chunks/9657-90d7d8e86cd8d7b3.js","1983","static/chunks/1983-7439545cf8f39348.js","7678","static/chunks/7678-80db3db210142fa5.js","3545","static/chunks/3545-9e4a648ea2701538.js","35","static/chunks/app/(v2)/(blog)/blog/page-6e2380a8fbf5f3da.js"],"ScrollArea"]
28:I[48652,["1965","static/chunks/f67032f2-9c72234b0d8f41b4.js","7134","static/chunks/7134-7a2ccc87dc1f1c96.js","9078","static/chunks/9078-9c4b2ff48765f274.js","6855","static/chunks/6855-c97c866fb9680afe.js","5051","static/chunks/5051-51ff92d736937f41.js","9657","static/chunks/9657-90d7d8e86cd8d7b3.js","1983","static/chunks/1983-7439545cf8f39348.js","7678","static/chunks/7678-80db3db210142fa5.js","3545","static/chunks/3545-9e4a648ea2701538.js","35","static/chunks/app/(v2)/(blog)/blog/page-6e2380a8fbf5f3da.js"],"Tabs"]
29:I[48652,["1965","static/chunks/f67032f2-9c72234b0d8f41b4.js","7134","static/chunks/7134-7a2ccc87dc1f1c96.js","9078","static/chunks/9078-9c4b2ff48765f274.js","6855","static/chunks/6855-c97c866fb9680afe.js","5051","static/chunks/5051-51ff92d736937f41.js","9657","static/chunks/9657-90d7d8e86cd8d7b3.js","1983","static/chunks/1983-7439545cf8f39348.js","7678","static/chunks/7678-80db3db210142fa5.js","3545","static/chunks/3545-9e4a648ea2701538.js","35","static/chunks/app/(v2)/(blog)/blog/page-6e2380a8fbf5f3da.js"],"TabsList"]
2a:I[48652,["1965","static/chunks/f67032f2-9c72234b0d8f41b4.js","7134","static/chunks/7134-7a2ccc87dc1f1c96.js","9078","static/chunks/9078-9c4b2ff48765f274.js","6855","static/chunks/6855-c97c866fb9680afe.js","5051","static/chunks/5051-51ff92d736937f41.js","9657","static/chunks/9657-90d7d8e86cd8d7b3.js","1983","static/chunks/1983-7439545cf8f39348.js","7678","static/chunks/7678-80db3db210142fa5.js","3545","static/chunks/3545-9e4a648ea2701538.js","35","static/chunks/app/(v2)/(blog)/blog/page-6e2380a8fbf5f3da.js"],"TabsTrigger"]
2b:I[48652,["1965","static/chunks/f67032f2-9c72234b0d8f41b4.js","7134","static/chunks/7134-7a2ccc87dc1f1c96.js","9078","static/chunks/9078-9c4b2ff48765f274.js","6855","static/chunks/6855-c97c866fb9680afe.js","5051","static/chunks/5051-51ff92d736937f41.js","9657","static/chunks/9657-90d7d8e86cd8d7b3.js","1983","static/chunks/1983-7439545cf8f39348.js","7678","static/chunks/7678-80db3db210142fa5.js","3545","static/chunks/3545-9e4a648ea2701538.js","35","static/chunks/app/(v2)/(blog)/blog/page-6e2380a8fbf5f3da.js"],"TabsContent"]
30:I[49720,["1965","static/chunks/f67032f2-9c72234b0d8f41b4.js","8229","static/chunks/9da6db1e-dbfab9261a7c6a02.js","7134","static/chunks/7134-7a2ccc87dc1f1c96.js","9078","static/chunks/9078-9c4b2ff48765f274.js","6855","static/chunks/6855-c97c866fb9680afe.js","5051","static/chunks/5051-51ff92d736937f41.js","9657","static/chunks/9657-90d7d8e86cd8d7b3.js","1983","static/chunks/1983-7439545cf8f39348.js","7678","static/chunks/7678-80db3db210142fa5.js","3545","static/chunks/3545-9e4a648ea2701538.js","3733","static/chunks/3733-74f52baf8b8f8b32.js","5081","static/chunks/app/(v2)/(blog)/blog/%5B...slug%5D/page-dd20a2b305eff2bd.js"],"ArticleSocials"]
31:I[9777,["1965","static/chunks/f67032f2-9c72234b0d8f41b4.js","8229","static/chunks/9da6db1e-dbfab9261a7c6a02.js","7134","static/chunks/7134-7a2ccc87dc1f1c96.js","9078","static/chunks/9078-9c4b2ff48765f274.js","6855","static/chunks/6855-c97c866fb9680afe.js","5051","static/chunks/5051-51ff92d736937f41.js","9657","static/chunks/9657-90d7d8e86cd8d7b3.js","1983","static/chunks/1983-7439545cf8f39348.js","7678","static/chunks/7678-80db3db210142fa5.js","3545","static/chunks/3545-9e4a648ea2701538.js","3733","static/chunks/3733-74f52baf8b8f8b32.js","5081","static/chunks/app/(v2)/(blog)/blog/%5B...slug%5D/page-dd20a2b305eff2bd.js"],"DocsTableOfContents"]
32:I[19897,["1965","static/chunks/f67032f2-9c72234b0d8f41b4.js","8229","static/chunks/9da6db1e-dbfab9261a7c6a02.js","7134","static/chunks/7134-7a2ccc87dc1f1c96.js","9078","static/chunks/9078-9c4b2ff48765f274.js","6855","static/chunks/6855-c97c866fb9680afe.js","5051","static/chunks/5051-51ff92d736937f41.js","9657","static/chunks/9657-90d7d8e86cd8d7b3.js","1983","static/chunks/1983-7439545cf8f39348.js","7678","static/chunks/7678-80db3db210142fa5.js","3545","static/chunks/3545-9e4a648ea2701538.js","3733","static/chunks/3733-74f52baf8b8f8b32.js","5081","static/chunks/app/(v2)/(blog)/blog/%5B...slug%5D/page-dd20a2b305eff2bd.js"],"Comments"]
1e:T518,M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z25:T729,<pre class="shiki ayu-dark" style="background-color:#0c0a09;color:#bfbdb6" tabindex="0"><code><span class="line"><span style="color:#FF8F40">CREATE</span><span style="color:#FF8F40"> TABLE</span><span style="color:#FFB454"> chat_channel</span><span style="color:#BFBDB6"> (</span></span>
<span class="line"><span style="color:#ACB6BF8C;font-style:italic">    -- Partition Key: Groups all messages for a single chat in the same partition</span></span>
<span class="line"><span style="color:#BFBDB6">    channel_id UUID,</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ACB6BF8C;font-style:italic">    -- Clustering Key: Orders messages within the chat (think ORDER BY)</span></span>
<span class="line"><span style="color:#BFBDB6">    sent_at </span><span style="color:#FF8F40">TIMESTAMP</span><span style="color:#BFBDB6">,</span></span>
<span class="line"><span style="color:#BFBDB6">    message_id UUID,</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ACB6BF8C;font-style:italic">    -- Row data</span></span>
<span class="line"><span style="color:#FF8F40">    message</span><span style="color:#FF8F40"> TEXT</span><span style="color:#BFBDB6">,</span></span>
<span class="line"></span>
<span class="line"><span style="color:#FF8F40">    PRIMARY KEY</span><span style="color:#BFBDB6"> (channel_id, sent_at, message_id)</span></span>
<span class="line"><span style="color:#BFBDB6">) </span><span style="color:#FF8F40">WITH</span><span style="color:#BFBDB6"> CLUSTERING </span><span style="color:#FF8F40">ORDER BY</span><span style="color:#BFBDB6"> (sent_at </span><span style="color:#FF8F40">ASC</span><span style="color:#BFBDB6">, message_id </span><span style="color:#FF8F40">ASC</span><span style="color:#BFBDB6">);</span></span>
<span class="line"></span></code></pre>26:T42d,M69.3 4l48 32c11 7.4 14 22.3 6.7 33.3s-22.3 14-33.3 6.7l-48-32c-11-7.4-14-22.3-6.7-33.3S58.3-3.3 69.3 4zM597.3 44l-48 32c-11 7.4-25.9 4.4-33.3-6.7s-4.4-25.9 6.7-33.3l48-32c11-7.4 25.9-4.4 33.3 6.7s4.4 25.9-6.7 33.3zM24 160l64 0c13.3 0 24 10.7 24 24s-10.7 24-24 24l-64 0c-13.3 0-24-10.7-24-24s10.7-24 24-24zm528 0l64 0c13.3 0 24 10.7 24 24s-10.7 24-24 24l-64 0c-13.3 0-24-10.7-24-24s10.7-24 24-24zM117.3 332l-48 32c-11 7.4-25.9 4.4-33.3-6.7s-4.4-25.9 6.7-33.3l48-32c11-7.4 25.9-4.4 33.3 6.7s4.4 25.9-6.7 33.3zm432-39.9l48 32c11 7.4 14 22.3 6.7 33.3s-22.3 14-33.3 6.7l-48-32c-11-7.4-14-22.3-6.7-33.3s22.3-14 33.3-6.7zm-100.1 5.7c-19.8 27.1-39.7 54.4-49.2 86.2l-160 0c-9.6-31.9-29.5-59.1-49.2-86.2c0 0 0 0 0 0s0 0 0 0c-5.2-7.1-10.4-14.2-15.4-21.4C155.6 247.9 144 213.3 144 176C144 78.8 222.8 0 320 0s176 78.8 176 176c0 37.3-11.6 71.9-31.4 100.3c-5 7.2-10.2 14.3-15.4 21.4c0 0 0 0 0 0s0 0 0 0zM400 432c0 44.2-35.8 80-80 80s-80-35.8-80-80l0-16 160 0 0 16zM320 96c8.8 0 16-7.2 16-16s-7.2-16-16-16c-61.9 0-112 50.1-112 112c0 8.8 7.2 16 16 16s16-7.2 16-16c0-44.2 35.8-80 80-80z27:T999,<pre class="shiki ayu-dark" style="background-color:#0c0a09;color:#bfbdb6" tabindex="0"><code><span class="line"><span style="color:#ACB6BF8C;font-style:italic">-- Notice there is no channel_id in this table, since all of this data is local</span></span>
<span class="line"><span style="color:#ACB6BF8C;font-style:italic">-- to a single SQLite database per channel.</span></span>
<span class="line"><span style="color:#ACB6BF8C;font-style:italic">--</span></span>
<span class="line"><span style="color:#ACB6BF8C;font-style:italic">-- The channel ID will be specified when defining which Durable Object to</span></span>
<span class="line"><span style="color:#ACB6BF8C;font-style:italic">-- connect to below (see )`CHAT_DO.idFromName(channelId)` below.</span></span>
<span class="line"><span style="color:#FF8F40">CREATE</span><span style="color:#FF8F40"> TABLE</span><span style="color:#FFB454"> messages</span><span style="color:#BFBDB6"> (</span></span>
<span class="line"><span style="color:#BFBDB6">  id </span><span style="color:#FF8F40">INTEGER</span><span style="color:#FF8F40"> PRIMARY KEY</span><span style="color:#BFBDB6">,</span></span>
<span class="line"><span style="color:#BFBDB6">  sent_at </span><span style="color:#FF8F40">TIMESTAMP</span><span style="color:#BFBDB6">,</span></span>
<span class="line"><span style="color:#BFBDB6">  sender_id UUID,</span></span>
<span class="line"><span style="color:#FF8F40">  message</span><span style="color:#FF8F40"> TEXT</span></span>
<span class="line"><span style="color:#BFBDB6">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#FF8F40">CREATE</span><span style="color:#FF8F40"> INDEX</span><span style="color:#FFB454"> ON</span><span style="color:#BFBDB6"> messages (sent_at </span><span style="color:#FF8F40">ASC</span><span style="color:#BFBDB6">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#FF8F40">CREATE</span><span style="color:#FF8F40"> TABLE</span><span style="color:#FFB454"> participants</span><span style="color:#BFBDB6"> (</span></span>
<span class="line"><span style="color:#BFBDB6">  user_id UUID </span><span style="color:#FF8F40">PRIMARY KEY</span><span style="color:#BFBDB6">,</span></span>
<span class="line"><span style="color:#BFBDB6">  joined_at </span><span style="color:#FF8F40">TIMESTAMP</span></span>
<span class="line"><span style="color:#BFBDB6">);</span></span>
<span class="line"></span></code></pre>2c:Tff1,<pre class="shiki ayu-dark" style="background-color:#0c0a09;color:#bfbdb6" tabindex="0"><code><span class="line"><span style="color:#ACB6BF8C;font-style:italic">// This Durable Object represents one partition</span></span>
<span class="line"><span style="color:#ACB6BF8C;font-style:italic">//</span></span>
<span class="line"><span style="color:#ACB6BF8C;font-style:italic">// It contains a completely isolated SQLite database</span></span>
<span class="line"><span style="color:#FF8F40">export</span><span style="color:#FF8F40"> class</span><span style="color:#59C2FF"> ChatChannel</span><span style="color:#FF8F40"> extends</span><span style="color:#39BAE6"> DurableObject</span><span style="color:#BFBDB6"> {</span></span>
<span class="line"><span style="color:#FF8F40">  async</span><span style="color:#FFB454"> getMessages</span><span style="color:#BFBDB6">() {</span></span>
<span class="line"><span style="color:#ACB6BF8C;font-style:italic">    // Execute query</span></span>
<span class="line"><span style="color:#FF8F40">    let</span><span style="color:#BFBDB6"> result </span><span style="color:#F29668">=</span><span style="color:#39BAE6;font-style:italic"> this</span><span style="color:#F29668">.</span><span style="color:#BFBDB6">ctx</span><span style="color:#F29668">.</span><span style="color:#BFBDB6">storage</span><span style="color:#F29668">.</span><span style="color:#BFBDB6">sql</span><span style="color:#F29668">.</span><span style="color:#FFB454">exec</span><span style="color:#BFBDB6">(</span><span style="color:#AAD94C">'SELECT * FROM messages ORDER BY sent_at ASC'</span><span style="color:#BFBDB6">)</span><span style="color:#F29668">.</span><span style="color:#FFB454">one</span><span style="color:#BFBDB6">()</span><span style="color:#BFBDB6B3">;</span></span>
<span class="line"><span style="color:#FF8F40">    return</span><span style="color:#BFBDB6"> result</span><span style="color:#BFBDB6B3">;</span></span>
<span class="line"><span style="color:#BFBDB6">  }</span></span>
<span class="line"><span style="color:#BFBDB6">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#FF8F40">function</span><span style="color:#FFB454"> getMessages</span><span style="color:#BFBDB6">(</span><span style="color:#D2A6FF">channelId</span><span style="color:#F29668">:</span><span style="color:#39BAE6"> string</span><span style="color:#BFBDB6">) {</span></span>
<span class="line"><span style="color:#ACB6BF8C;font-style:italic">  // Here, the channel ID corresponds to the database partition</span></span>
<span class="line"><span style="color:#FF8F40">  const</span><span style="color:#BFBDB6"> id </span><span style="color:#F29668">=</span><span style="color:#BFBDB6"> env</span><span style="color:#F29668">.</span><span style="color:#BFBDB6">CHAT_CHANNEL_DURABLE_OBJECT</span><span style="color:#F29668">.</span><span style="color:#FFB454">idFromName</span><span style="color:#BFBDB6">(channelId)</span><span style="color:#BFBDB6B3">;</span></span>
<span class="line"><span style="color:#FF8F40">  const</span><span style="color:#BFBDB6"> channelDurableObject </span><span style="color:#F29668">=</span><span style="color:#BFBDB6"> c</span><span style="color:#F29668">.</span><span style="color:#BFBDB6">env</span><span style="color:#F29668">.</span><span style="color:#BFBDB6">CHAT_CHANNEL_DURABLE_OBJECT</span><span style="color:#F29668">.</span><span style="color:#FFB454">get</span><span style="color:#BFBDB6">(id)</span><span style="color:#BFBDB6B3">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ACB6BF8C;font-style:italic">  // Execute the query</span></span>
<span class="line"><span style="color:#FF8F40">  return</span><span style="color:#FF8F40"> await</span><span style="color:#BFBDB6"> channelDurableObject</span><span style="color:#F29668">.</span><span style="color:#FFB454">getMessages</span><span style="color:#BFBDB6">()</span><span style="color:#BFBDB6B3">;</span></span>
<span class="line"><span style="color:#BFBDB6">}</span></span>
<span class="line"></span></code></pre>2d:T106b,<pre class="shiki ayu-dark" style="background-color:#0c0a09;color:#bfbdb6" tabindex="0"><code><span class="line"><span style="color:#FF8F40">import</span><span style="color:#BFBDB6"> { createLibsqlClient } </span><span style="color:#FF8F40">from</span><span style="color:#AAD94C"> "@libsql/client"</span><span style="color:#BFBDB6B3">;</span></span>
<span class="line"><span style="color:#FF8F40">import</span><span style="color:#BFBDB6"> { createApiClient } </span><span style="color:#FF8F40">from</span><span style="color:#AAD94C"> "@tursodatabase/api"</span><span style="color:#BFBDB6B3">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#FF8F40">const</span><span style="color:#BFBDB6"> api </span><span style="color:#F29668">=</span><span style="color:#FFB454"> createApiClient</span><span style="color:#BFBDB6">(</span><span style="color:#ACB6BF8C;font-style:italic">/* ... */</span><span style="color:#BFBDB6">)</span><span style="color:#BFBDB6B3">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#FF8F40">function</span><span style="color:#FFB454"> getMessages</span><span style="color:#BFBDB6">(</span><span style="color:#D2A6FF">channelId</span><span style="color:#F29668">:</span><span style="color:#39BAE6"> string</span><span style="color:#BFBDB6">) {</span></span>
<span class="line"><span style="color:#ACB6BF8C;font-style:italic">  // Each database represents one partition</span></span>
<span class="line"><span style="color:#ACB6BF8C;font-style:italic">  //</span></span>
<span class="line"><span style="color:#ACB6BF8C;font-style:italic">  // This gets an existing channel and connects to it</span></span>
<span class="line"><span style="color:#FF8F40">  const</span><span style="color:#BFBDB6"> { hostname } </span><span style="color:#F29668">=</span><span style="color:#FF8F40"> await</span><span style="color:#BFBDB6"> api</span><span style="color:#F29668">.</span><span style="color:#BFBDB6">databases</span><span style="color:#F29668">.</span><span style="color:#FFB454">retrieve</span><span style="color:#BFBDB6">(</span><span style="color:#AAD94C">`channel-</span><span style="color:#FF8F40">${</span><span style="color:#BFBDB6">channelId</span><span style="color:#FF8F40">}</span><span style="color:#AAD94C">`</span><span style="color:#BFBDB6">)</span><span style="color:#BFBDB6B3">;</span></span>
<span class="line"><span style="color:#FF8F40">  const</span><span style="color:#BFBDB6"> db </span><span style="color:#F29668">=</span><span style="color:#FFB454"> createLibsqlClient</span><span style="color:#BFBDB6">({</span></span>
<span class="line"><span style="color:#BFBDB6">    url</span><span style="color:#BFBDB6B3">:</span><span style="color:#AAD94C"> `libsql://</span><span style="color:#FF8F40">${</span><span style="color:#BFBDB6">hostname</span><span style="color:#FF8F40">}</span><span style="color:#AAD94C">`</span><span style="color:#BFBDB6B3">,</span></span>
<span class="line"><span style="color:#BFBDB6">    authToken</span><span style="color:#BFBDB6B3">:</span><span style="color:#AAD94C"> "..."</span></span>
<span class="line"><span style="color:#BFBDB6">  })</span><span style="color:#BFBDB6B3">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ACB6BF8C;font-style:italic">  // Execute query</span></span>
<span class="line"><span style="color:#FF8F40">  const</span><span style="color:#BFBDB6"> result </span><span style="color:#F29668">=</span><span style="color:#FF8F40"> await</span><span style="color:#BFBDB6"> turso</span><span style="color:#F29668">.</span><span style="color:#FFB454">execute</span><span style="color:#BFBDB6">(</span><span style="color:#AAD94C">"SELECT * FROM messages ORDER BY sent_at ASC"</span><span style="color:#BFBDB6">)</span><span style="color:#BFBDB6B3">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#FF8F40">  return</span><span style="color:#BFBDB6"> result</span><span style="color:#F29668">.</span><span style="color:#BFBDB6">rows</span><span style="color:#BFBDB6B3">;</span></span>
<span class="line"><span style="color:#BFBDB6">}</span></span>
<span class="line"></span></code></pre>2e:T42d,M69.3 4l48 32c11 7.4 14 22.3 6.7 33.3s-22.3 14-33.3 6.7l-48-32c-11-7.4-14-22.3-6.7-33.3S58.3-3.3 69.3 4zM597.3 44l-48 32c-11 7.4-25.9 4.4-33.3-6.7s-4.4-25.9 6.7-33.3l48-32c11-7.4 25.9-4.4 33.3 6.7s4.4 25.9-6.7 33.3zM24 160l64 0c13.3 0 24 10.7 24 24s-10.7 24-24 24l-64 0c-13.3 0-24-10.7-24-24s10.7-24 24-24zm528 0l64 0c13.3 0 24 10.7 24 24s-10.7 24-24 24l-64 0c-13.3 0-24-10.7-24-24s10.7-24 24-24zM117.3 332l-48 32c-11 7.4-25.9 4.4-33.3-6.7s-4.4-25.9 6.7-33.3l48-32c11-7.4 25.9-4.4 33.3 6.7s4.4 25.9-6.7 33.3zm432-39.9l48 32c11 7.4 14 22.3 6.7 33.3s-22.3 14-33.3 6.7l-48-32c-11-7.4-14-22.3-6.7-33.3s22.3-14 33.3-6.7zm-100.1 5.7c-19.8 27.1-39.7 54.4-49.2 86.2l-160 0c-9.6-31.9-29.5-59.1-49.2-86.2c0 0 0 0 0 0s0 0 0 0c-5.2-7.1-10.4-14.2-15.4-21.4C155.6 247.9 144 213.3 144 176C144 78.8 222.8 0 320 0s176 78.8 176 176c0 37.3-11.6 71.9-31.4 100.3c-5 7.2-10.2 14.3-15.4 21.4c0 0 0 0 0 0s0 0 0 0zM400 432c0 44.2-35.8 80-80 80s-80-35.8-80-80l0-16 160 0 0 16zM320 96c8.8 0 16-7.2 16-16s-7.2-16-16-16c-61.9 0-112 50.1-112 112c0 8.8 7.2 16 16 16s16-7.2 16-16c0-44.2 35.8-80 80-80z2f:T42d,M69.3 4l48 32c11 7.4 14 22.3 6.7 33.3s-22.3 14-33.3 6.7l-48-32c-11-7.4-14-22.3-6.7-33.3S58.3-3.3 69.3 4zM597.3 44l-48 32c-11 7.4-25.9 4.4-33.3-6.7s-4.4-25.9 6.7-33.3l48-32c11-7.4 25.9-4.4 33.3 6.7s4.4 25.9-6.7 33.3zM24 160l64 0c13.3 0 24 10.7 24 24s-10.7 24-24 24l-64 0c-13.3 0-24-10.7-24-24s10.7-24 24-24zm528 0l64 0c13.3 0 24 10.7 24 24s-10.7 24-24 24l-64 0c-13.3 0-24-10.7-24-24s10.7-24 24-24zM117.3 332l-48 32c-11 7.4-25.9 4.4-33.3-6.7s-4.4-25.9 6.7-33.3l48-32c11-7.4 25.9-4.4 33.3 6.7s4.4 25.9-6.7 33.3zm432-39.9l48 32c11 7.4 14 22.3 6.7 33.3s-22.3 14-33.3 6.7l-48-32c-11-7.4-14-22.3-6.7-33.3s22.3-14 33.3-6.7zm-100.1 5.7c-19.8 27.1-39.7 54.4-49.2 86.2l-160 0c-9.6-31.9-29.5-59.1-49.2-86.2c0 0 0 0 0 0s0 0 0 0c-5.2-7.1-10.4-14.2-15.4-21.4C155.6 247.9 144 213.3 144 176C144 78.8 222.8 0 320 0s176 78.8 176 176c0 37.3-11.6 71.9-31.4 100.3c-5 7.2-10.2 14.3-15.4 21.4c0 0 0 0 0 0s0 0 0 0zM400 432c0 44.2-35.8 80-80 80s-80-35.8-80-80l0-16 160 0 0 16zM320 96c8.8 0 16-7.2 16-16s-7.2-16-16-16c-61.9 0-112 50.1-112 112c0 8.8 7.2 16 16 16s16-7.2 16-16c0-44.2 35.8-80 80-80ze:[["$","div",null,{"className":"mx-auto mt-20 w-full max-w-6xl px-4 md:mt-32 max-w-[1440px]","style":{"--header-height":"5rem"},"children":[["$","ul",null,{"className":"text-muted-foreground my-4 flex flex-wrap items-center gap-2 text-xs","children":[["$","li",null,{"children":["$","$La",null,{"href":"/blog","children":"Blog"}]}],["$","li",null,{"className":"h-2.5","children":["$","svg",null,{"aria-hidden":"true","focusable":"false","data-prefix":"fas","data-icon":"chevron-right","className":"svg-inline--fa fa-chevron-right block h-full w-auto","role":"img","xmlns":"http://www.w3.org/2000/svg","viewBox":"0 0 320 512","style":{},"ref":"$undefined","children":["$","path",null,{"fill":"currentColor","d":"M310.6 233.4c12.5 12.5 12.5 32.8 0 45.3l-192 192c-12.5 12.5-32.8 12.5-45.3 0s-12.5-32.8 0-45.3L242.7 256 73.4 86.6c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0l192 192z","style":{}}]}]}],["$","li",null,{"children":"Technical"}],["$","li",null,{"className":"h-2.5","children":["$","svg",null,{"aria-hidden":"true","focusable":"false","data-prefix":"fas","data-icon":"chevron-right","className":"svg-inline--fa fa-chevron-right block h-full w-auto","role":"img","xmlns":"http://www.w3.org/2000/svg","viewBox":"0 0 320 512","style":{},"ref":"$undefined","children":["$","path",null,{"fill":"currentColor","d":"M310.6 233.4c12.5 12.5 12.5 32.8 0 45.3l-192 192c-12.5 12.5-32.8 12.5-45.3 0s-12.5-32.8 0-45.3L242.7 256 73.4 86.6c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0l192 192z","style":{}}]}]}],["$","li",null,{"className":"text-foreground font-semibold","children":"SQLite-on-the-Server Is Misunderstood: Better At Hyper-Scale Than Micro-Scale"}]]}],["$","div",null,{"className":"flex flex-col gap-8 pb-6 lg:flex-row","children":[["$","aside",null,{"className":"order-1 mt-2 flex min-w-0 max-w-s flex-1 flex-col gap-2","children":["$","div",null,{"className":"top-header sticky pt-2","children":[["$","p",null,{"className":"mb-2 text-sm font-semibold","children":"Posted by"}],["$","div",null,{"className":"mb-4 flex items-center gap-2","children":[["$","$L1b",null,{"className":"mt-1 size-14","children":[["$","$L1c",null,{"children":"$undefined"}],["$","$L1d",null,{"src":"/_next/static/media/avatar.7191d056.jpeg","height":1516,"width":1516,"blurDataURL":"data:image/jpeg;base64,/9j/2wBDAAoKCgoKCgsMDAsPEA4QDxYUExMUFiIYGhgaGCIzICUgICUgMy03LCksNy1RQDg4QFFeT0pPXnFlZXGPiI+7u/v/2wBDAQoKCgoKCgsMDAsPEA4QDxYUExMUFiIYGhgaGCIzICUgICUgMy03LCksNy1RQDg4QFFeT0pPXnFlZXGPiI+7u/v/wgARCAAIAAgDASIAAhEBAxEB/8QAFQABAQAAAAAAAAAAAAAAAAAAAAb/xAAVAQEBAAAAAAAAAAAAAAAAAAAEBf/aAAwDAQACEAMQAAAApxJX/8QAHBAAAgICAwAAAAAAAAAAAAAAAQIDEgAEBREj/9oACAEBAAE/AIG3H5iX2rpIoRIq1UmvbHP/xAAXEQADAQAAAAAAAAAAAAAAAAAAAhNh/9oACAECAQE/AKNh/8QAGBEAAgMAAAAAAAAAAAAAAAAAAAIBIXH/2gAIAQMBAT8AlFrD/9k=","blurWidth":8,"blurHeight":8,"alt":{"name":"Nathan Flurry","role":"Co-founder & CTO","avatar":{"src":"/_next/static/media/avatar.7191d056.jpeg","height":1516,"width":1516,"blurDataURL":"data:image/jpeg;base64,/9j/2wBDAAoKCgoKCgsMDAsPEA4QDxYUExMUFiIYGhgaGCIzICUgICUgMy03LCksNy1RQDg4QFFeT0pPXnFlZXGPiI+7u/v/2wBDAQoKCgoKCgsMDAsPEA4QDxYUExMUFiIYGhgaGCIzICUgICUgMy03LCksNy1RQDg4QFFeT0pPXnFlZXGPiI+7u/v/wgARCAAIAAgDASIAAhEBAxEB/8QAFQABAQAAAAAAAAAAAAAAAAAAAAb/xAAVAQEBAAAAAAAAAAAAAAAAAAAEBf/aAAwDAQACEAMQAAAApxJX/8QAHBAAAgICAwAAAAAAAAAAAAAAAQIDEgAEBREj/9oACAEBAAE/AIG3H5iX2rpIoRIq1UmvbHP/xAAXEQADAQAAAAAAAAAAAAAAAAAAAhNh/9oACAECAQE/AKNh/8QAGBEAAgMAAAAAAAAAAAAAAAAAAAIBIXH/2gAIAQMBAT8AlFrD/9k=","blurWidth":8,"blurHeight":8},"socials":{"twitter":"https://x.com/NathanFlurry/","github":"https://github.com/nathanflurry","bluesky":"https://bsky.app/profile/nathanflurry.com"}}}]]}],["$","div",null,{"className":"flex flex-col","children":[["$","h3",null,{"className":"font-bold","children":"Nathan Flurry"}],["$","p",null,{"className":"text-muted-foreground text-sm","children":"Co-founder & CTO"}],["$","p",null,{"className":"flex gap-2 text-xs text-muted-foreground mt-1","children":[["$","a",null,{"href":"https://x.com/NathanFlurry/","target":"_blank","rel":"noopener noreferrer","children":["$","svg",null,{"aria-hidden":"true","focusable":"false","data-prefix":"fab","data-icon":"x-twitter","className":"svg-inline--fa fa-x-twitter ","role":"img","xmlns":"http://www.w3.org/2000/svg","viewBox":"0 0 512 512","style":{},"ref":"$undefined","children":["$","path",null,{"fill":"currentColor","d":"M389.2 48h70.6L305.6 224.2 487 464H345L233.7 318.6 106.5 464H35.8L200.7 275.5 26.8 48H172.4L272.9 180.9 389.2 48zM364.4 421.8h39.1L151.1 88h-42L364.4 421.8z","style":{}}]}]}],["$","a",null,{"href":"https://bsky.app/profile/nathanflurry.com","target":"_blank","rel":"noopener noreferrer","children":["$","svg",null,{"aria-hidden":"true","focusable":"false","data-prefix":"fab","data-icon":"bluesky","className":"svg-inline--fa fa-bluesky ","role":"img","xmlns":"http://www.w3.org/2000/svg","viewBox":"0 0 512 512","style":{},"ref":"$undefined","children":["$","path",null,{"fill":"currentColor","d":"M111.8 62.2C170.2 105.9 233 194.7 256 242.4c23-47.6 85.8-136.4 144.2-180.2c42.1-31.6 110.3-56 110.3 21.8c0 15.5-8.9 130.5-14.1 149.2C478.2 298 412 314.6 353.1 304.5c102.9 17.5 129.1 75.5 72.5 133.5c-107.4 110.2-154.3-27.6-166.3-62.9l0 0c-1.7-4.9-2.6-7.8-3.3-7.8s-1.6 3-3.3 7.8l0 0c-12 35.3-59 173.1-166.3 62.9c-56.5-58-30.4-116 72.5-133.5C100 314.6 33.8 298 15.7 233.1C10.4 214.4 1.5 99.4 1.5 83.9c0-77.8 68.2-53.4 110.3-21.8z","style":{}}]}]}],["$","a",null,{"href":"https://github.com/nathanflurry","target":"_blank","rel":"noopener noreferrer","children":["$","svg",null,{"aria-hidden":"true","focusable":"false","data-prefix":"fab","data-icon":"github","className":"svg-inline--fa fa-github ","role":"img","xmlns":"http://www.w3.org/2000/svg","viewBox":"0 0 496 512","style":{},"ref":"$undefined","children":["$","path",null,{"fill":"currentColor","d":"$1e","style":{}}]}]}]]}]]}]]}],["$","div",null,{"className":"text-muted-foreground mb-6 flex items-center gap-2 text-sm","children":[["$","svg",null,{"aria-hidden":"true","focusable":"false","data-prefix":"fas","data-icon":"calendar-day","className":"svg-inline--fa fa-calendar-day ","role":"img","xmlns":"http://www.w3.org/2000/svg","viewBox":"0 0 448 512","style":{},"ref":"$undefined","children":["$","path",null,{"fill":"currentColor","d":"M128 0c17.7 0 32 14.3 32 32l0 32 128 0 0-32c0-17.7 14.3-32 32-32s32 14.3 32 32l0 32 48 0c26.5 0 48 21.5 48 48l0 48L0 160l0-48C0 85.5 21.5 64 48 64l48 0 0-32c0-17.7 14.3-32 32-32zM0 192l448 0 0 272c0 26.5-21.5 48-48 48L48 512c-26.5 0-48-21.5-48-48L0 192zm80 64c-8.8 0-16 7.2-16 16l0 96c0 8.8 7.2 16 16 16l96 0c8.8 0 16-7.2 16-16l0-96c0-8.8-7.2-16-16-16l-96 0z","style":{}}]}],["$","time",null,{"className":"text-sm","children":"February 16, 2025"}]]}],["$","p",null,{"className":"mb-2 hidden text-sm font-semibold lg:block","children":"Other articles"}],"$L1f"]}]}],["$","article",null,{"className":"order-3 mt-4 w-full flex-shrink-0 lg:order-2 xl:max-w-[1000px] prose-invert prose","children":[["$","$L20",null,{"src":"/_next/static/media/image.f86d756a.png","height":1024,"width":2334,"blurDataURL":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAECAMAAACEE47CAAAACVBMVEUSEhItLS0jHx9l6EnqAAAACXBIWXMAABYlAAAWJQFJUiTwAAAAGUlEQVR4nGNggAFGRkZGBiYmMIMJLgpiAAABJAAOh3bbHwAAAABJRU5ErkJggg==","blurWidth":8,"blurHeight":4,"alt":"Promo Image","className":"rounded-xl border border-white/10"}],[["$","h1",null,{"children":"SQLite-on-the-Server Is Misunderstood: Better At Hyper-Scale Than Micro-Scale"}],"\n",["$","p",null,{"class":"mb-10 text-lg font-semibold leading-7","children":["$","p",null,{"children":["We're Rivet, a new open-source, self-hostable serverless platform. We've been in the weeds with SQLite-on-the-server recently and – boy – do we have a lot of thoughts to share. ",["$","$La",null,{"href":"https://github.com/rivet-gg/rivet","children":"Give us a star on GitHub"}],", we'll be sharing a lot more about SQLite soon!"]}]}],"\n",["$","p",null,{"children":["There's been ",["$","$La",null,{"href":"https://lobste.rs/s/t1enph/siren_call_sqlite_on_server","children":"a lot of discussion"}]," recently about the pros and cons of SQLite on the server. After reading many of these conversations, I realized that my perspective on the power of SQLite-on-the-server is lopsided from popular opinion: SQLite's strengths really shine at scale, instead of with small hobbyist deployments that it's frequently referenced in."]}],"\n",["$","$L21",null,{"level":2,"id":"background","children":"Background"}],"\n",["$","p",null,{"children":"Before jumping in to my perspective on the benefits of SQLite at scale, it's helpful to understand some background on SQLite-on-the-server for micro-scale apps."}],"\n",["$","$L21",null,{"level":3,"id":"why-developers-love-sq-lite-for-micro-scale-deployments","children":"Why Developers Love SQLite for Micro-Scale Deployments"}],"\n",["$","$L20",null,{"src":{"src":"/_next/static/media/sqlite-microscale.5d171f3e.png","height":1786,"width":2500,"blurDataURL":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAGCAMAAADJ2y/JAAAABlBMVEUUFBQdHR3/rzguAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAHUlEQVR4nGNgYGRkAGMQYGQE88AMEBcEIQwIhgEAAocAE3+hAWsAAAAASUVORK5CYII=","blurWidth":8,"blurHeight":6}}],"\n",["$","p",null,{"children":"Most developers consider server-side SQLite a simple, cost-effective choice for small-scale applications. It's often valued for:"}],"\n",["$","ul",null,{"children":["\n",["$","li",null,{"children":[["$","strong",null,{"children":"Low infrastructure costs"}],": No need for separate database servers—just a single file."]}],"\n",["$","li",null,{"children":[["$","strong",null,{"children":"Seamless development and testing"}],": The same database file can be used across client and server."]}],"\n",["$","li",null,{"children":[["$","strong",null,{"children":"Minimal management overhead"}],": No complex configurations or database daemons."]}],"\n",["$","li",null,{"children":[["$","strong",null,{"children":"Proven reliability"}],": It's been around forever. It's the ",["$","$La",null,{"href":"https://www.sqlite.org/mostdeployed.html","children":"world's most widely deployed database"}]," and ",["$","$La",null,{"href":"https://hackernoon.com/the-story-of-dwayne-richard-hipp-and-the-development-of-sqlite-in-1999-yc4v356q","children":"built to withstand battleships getting blown to bits"}],"."]}],"\n"]}],"\n",["$","p",null,{"children":"These characteristics make SQLite an attractive option for personal projects, lightweight applications, and prototypes."}],"\n",["$","$L21",null,{"level":3,"id":"tools-for-sq-lite-on-the-server","children":"Tools for SQLite-on-the-server"}],"\n",["$","p",null,{"children":["Tools like ",["$","$La",null,{"href":"https://github.com/superfly/litefs","children":"LiteFS"}],", ",["$","$La",null,{"href":"https://litestream.io/","children":"Litestream"}],", ",["$","$La",null,{"href":"https://github.com/rqlite/rqlite","children":"rqlite"}],", ",["$","$La",null,{"href":"https://dqlite.io/","children":"Dqlite"}],", and ",["$","$La",null,{"href":"https://bedrockdb.com/","children":"Bedrock"}]," enhance SQLite with replication and high availability for micro-scale deployments."]}],"\n",["$","p",null,{"children":["However, this post focuses on ",["$","$La",null,{"href":"https://developers.cloudflare.com/durable-objects/get-started/tutorial-with-sql-api/","children":"Cloudflare Durable Objects"}]," and ",["$","$La",null,{"href":"https://turso.tech/","children":"Turso"}]," to highlight the often-overlooked advantages of SQLite at scale."]}],"\n",["$","$L21",null,{"level":2,"id":"databases-at-hyper-scale-today-sharded-databases-and-partitioning-keys","children":"Databases at Hyper-Scale Today: Sharded Databases & Partitioning Keys"}],"\n",["$","$L20",null,{"src":{"src":"/_next/static/media/cassandra.bb9addd0.png","height":2178,"width":1934,"blurDataURL":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAcAAAAICAMAAAAC2hU0AAAACVBMVEUSEhIfJCkYGRk5LxKoAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAJklEQVR4nCWLsQ0AAAyCwP+PbqwuGKIAIQGUJq6oVmeA/KrisdMBBRgAJy8ZYaAAAAAASUVORK5CYII=","blurWidth":7,"blurHeight":8}}],"\n",["$","p",null,{"children":["In high-scale systems, companies frequently struggle scaling databases like ",["$","$La",null,{"href":"https://www.postgresql.org/","children":"Postgres"}]," or ",["$","$La",null,{"href":"https://www.mysql.com/","children":"MySQL"}],". Instead, they often turn to sharded databases such as ",["$","$La",null,{"href":"https://cassandra.apache.org/","children":"Cassandra"}],", ",["$","$La",null,{"href":"https://www.scylladb.com/","children":"ScyllaDB"}],", ",["$","$La",null,{"href":"https://aws.amazon.com/dynamodb/","children":"DynamoDB"}],", ",["$","$La",null,{"href":"https://vitess.io/","children":"Vitess"}]," (sharded MySQL), and ",["$","$La",null,{"href":"https://www.citusdata.com/","children":"Citus"}]," (sharded Postgres)."]}],"\n",["$","p",null,{"children":"These systems use partitioning keys to co-locate related & similarly structured data. For example, a typical chat application on Cassandra might define:"}],"\n",["$","div",null,{"className":"not-prose my-4 rounded-md border group-[.code-group]:my-0 group-[.code-group]:-mt-2 group-[.code-group]:border-none","data-code-group":true,"children":[["$","div",null,{"className":"text-foreground flex items-center justify-between gap-2 border-b p-2 text-xs","children":[["$","div",null,{"className":"text-muted-foreground flex items-center gap-1","children":["$","div",null,{"ref":"$undefined","className":"inline-flex items-center tracking-normal rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 whitespace-nowrap max-w-full overflow-hidden truncate text-foreground","children":"schema.cql"}]}],["$","$L22",null,{"trigger":["$","$L23",null,{"children":["$","button",null,{"className":"group group/button inline-flex items-center justify-center whitespace-nowrap rounded-md font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:z-10 relative aria-disabled:pointer-events-none aria-disabled:opacity-50 disabled:pointer-events-none disabled:opacity-50 hover:bg-accent hover:text-accent-foreground h-7 w-7 text-xs [&_svg]:size-3 gap-1.5","ref":"$undefined","disabled":"$undefined","children":[null,["$","svg",null,{"aria-hidden":"true","focusable":"false","data-prefix":"fas","data-icon":"copy","className":"svg-inline--fa fa-copy ","role":"img","xmlns":"http://www.w3.org/2000/svg","viewBox":"0 0 448 512","style":{},"ref":"$undefined","children":["$","path",null,{"fill":"currentColor","d":"M208 0L332.1 0c12.7 0 24.9 5.1 33.9 14.1l67.9 67.9c9 9 14.1 21.2 14.1 33.9L448 336c0 26.5-21.5 48-48 48l-192 0c-26.5 0-48-21.5-48-48l0-288c0-26.5 21.5-48 48-48zM48 128l80 0 0 64-64 0 0 256 192 0 0-32 64 0 0 48c0 26.5-21.5 48-48 48L48 512c-26.5 0-48-21.5-48-48L0 176c0-26.5 21.5-48 48-48z","style":{}}]}],null]}]}],"content":"Copy code"}]]}],["$","div",null,{"className":"bg-background text-wrap p-2 text-sm","children":["$","$L24",null,{"className":"w-full","children":["$","span",null,{"className":"not-prose code","dangerouslySetInnerHTML":{"__html":"$25"}}]}]}]]}],"\n",["$","p",null,{"children":"To query messages from this partition, you could write:"}],"\n",["$","div",null,{"className":"not-prose my-4 rounded-md border group-[.code-group]:my-0 group-[.code-group]:-mt-2 group-[.code-group]:border-none","data-code-group":true,"children":[["$","div",null,{"className":"text-foreground flex items-center justify-between gap-2 border-b p-2 text-xs","children":[["$","div",null,{"className":"text-muted-foreground flex items-center gap-1","children":["$","div",null,{"ref":"$undefined","className":"inline-flex items-center tracking-normal rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 whitespace-nowrap max-w-full overflow-hidden truncate text-foreground","children":"query.cql"}]}],["$","$L22",null,{"trigger":["$","$L23",null,{"children":["$","button",null,{"className":"group group/button inline-flex items-center justify-center whitespace-nowrap rounded-md font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:z-10 relative aria-disabled:pointer-events-none aria-disabled:opacity-50 disabled:pointer-events-none disabled:opacity-50 hover:bg-accent hover:text-accent-foreground h-7 w-7 text-xs [&_svg]:size-3 gap-1.5","ref":"$undefined","disabled":"$undefined","children":[null,["$","svg",null,{"aria-hidden":"true","focusable":"false","data-prefix":"fas","data-icon":"copy","className":"svg-inline--fa fa-copy ","role":"img","xmlns":"http://www.w3.org/2000/svg","viewBox":"0 0 448 512","style":{},"ref":"$undefined","children":["$","path",null,{"fill":"currentColor","d":"M208 0L332.1 0c12.7 0 24.9 5.1 33.9 14.1l67.9 67.9c9 9 14.1 21.2 14.1 33.9L448 336c0 26.5-21.5 48-48 48l-192 0c-26.5 0-48-21.5-48-48l0-288c0-26.5 21.5-48 48-48zM48 128l80 0 0 64-64 0 0 256 192 0 0-32 64 0 0 48c0 26.5-21.5 48-48 48L48 512c-26.5 0-48-21.5-48-48L0 176c0-26.5 21.5-48 48-48z","style":{}}]}],null]}]}],"content":"Copy code"}]]}],["$","div",null,{"className":"bg-background text-wrap p-2 text-sm","children":["$","$L24",null,{"className":"w-full","children":["$","span",null,{"className":"not-prose code","dangerouslySetInnerHTML":{"__html":"<pre class=\"shiki ayu-dark\" style=\"background-color:#0c0a09;color:#bfbdb6\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color:#FF8F40\">SELECT</span><span style=\"color:#F29668\"> *</span><span style=\"color:#FF8F40\"> FROM</span><span style=\"color:#BFBDB6\"> user_chat </span><span style=\"color:#FF8F40\">WHERE</span><span style=\"color:#BFBDB6\"> channel_id </span><span style=\"color:#F29668\">=</span><span style=\"color:#BFBDB6\"> ? </span><span style=\"color:#FF8F40\">ORDER BY</span><span style=\"color:#BFBDB6\"> sent_at </span><span style=\"color:#FF8F40\">ASC</span><span style=\"color:#BFBDB6\">, message_id </span><span style=\"color:#FF8F40\">ASC</span><span style=\"color:#BFBDB6\">;</span></span>\n<span class=\"line\"></span></code></pre>"}}]}]}]]}],"\n",["$","$L21",null,{"level":3,"id":"benefits-of-sharded-databases","children":"Benefits of Sharded Databases"}],"\n",["$","p",null,{"children":"Sharded databases power almost every large tech company because they provide:"}],"\n",["$","ul",null,{"children":["\n",["$","li",null,{"children":"Efficient batch reads with data grouped in the same partition."}],"\n",["$","li",null,{"children":"Horizontal scalability by partitioning data across nodes."}],"\n",["$","li",null,{"children":"Optimized writes for high-ingestion workloads"}],"\n"]}],"\n",["$","div",null,{"className":"relative w-full rounded-xl border p-4 my-4 flex gap-3 bg-green-950/20 border-green-700/50","children":[["$","div",null,{"className":"flex-shrink-0 pt-0.5","children":["$","svg",null,{"aria-hidden":"true","focusable":"false","data-prefix":"fas","data-icon":"lightbulb-on","className":"svg-inline--fa fa-lightbulb-on w-5 h-5 text-green-400","role":"img","xmlns":"http://www.w3.org/2000/svg","viewBox":"0 0 640 512","style":{},"ref":"$undefined","children":["$","path",null,{"fill":"currentColor","d":"$26","style":{}}]}]}],["$","div",null,{"className":"flex-1 prose-invert prose max-w-full w-full text-green-100","children":["$","p",null,{"children":["Apple runs the world's largest known number of Cassandra/ScyllaDB instances ",["$","$La",null,{"href":"https://x.com/erickramirezau/status/1578063811495477248","children":"with roughly 300,000 nodes as of 2022"}],". Almost all large companies have shared that they also run massive clusters of partitioned databases in the thousands of nodes."]}]}]]}],"\n",["$","$L21",null,{"level":3,"id":"challenges-with-current-partitioning-solutions","children":"Challenges with Current Partitioning Solutions"}],"\n",["$","p",null,{"children":"While partitioning strategies improve scalability, they introduce significant challenges:"}],"\n",["$","ul",null,{"children":["\n",["$","li",null,{"children":[["$","strong",null,{"children":"Rigid schemas"}],": Unlike Postgres or MySQL, the schema must exactly match the intended query patterns exactly, limiting flexibility."]}],"\n",["$","li",null,{"children":[["$","strong",null,{"children":"Complex schema changes"}],": Adding a new index or relation requires significant operational overhead to create & populate a new table in a live system."]}],"\n",["$","li",null,{"children":[["$","strong",null,{"children":"Complex cross-partition operations"}],": Enforcing ACID properties across partitions is difficult. Companies often resort to complicated ",["$","$La",null,{"href":"https://en.wikipedia.org/wiki/Two-phase_commit_protocol","children":"two-phase commits"}]," or design with an acceptable level of data inconsistency."]}],"\n",["$","li",null,{"children":[["$","strong",null,{"children":"Data inconsistency"}],": Without strong constraints between tables & partitions, data frequently becomes \"dirty\" because of interrupted transactions or failure to propagate changes."]}],"\n"]}],"\n",["$","$L21",null,{"level":2,"id":"enter-sq-lite-at-scale-cloudflare-durable-objects-and-turso","children":"Enter SQLite at Scale: Cloudflare Durable Objects & Turso"}],"\n",["$","p",null,{"children":[["$","$La",null,{"href":"https://developers.cloudflare.com/durable-objects/get-started/tutorial-with-sql-api/","children":"Cloudflare Durable Objects"}]," and ",["$","$La",null,{"href":"https://turso.tech/","children":"Turso"}]," demonstrate how SQLite will change how hyper-scale applications may be architected in the future."]}],"\n",["$","p",null,{"children":"These databases provide:"}],"\n",["$","ul",null,{"children":["\n",["$","li",null,{"children":[["$","strong",null,{"children":"Dynamic scaling"}],": Instantly provision databases per entity, reducing infrastructure complexity."]}],"\n",["$","li",null,{"children":[["$","strong",null,{"children":"Infinite, cheap databases"}],": Similar to partitions, you can spawn an infinite number of SQLite databases because they are incredibly cheap to create & manage."]}],"\n",["$","li",null,{"children":[["$","strong",null,{"children":"Global distribution"}],": Databases are placed closer to users, improving query performance."]}],"\n",["$","li",null,{"children":[["$","strong",null,{"children":"Built-in replication and durability"}],": Unlike traditional SQLite, these services replicate data across multiple regions for high availability."]}],"\n"]}],"\n",["$","$L21",null,{"level":3,"id":"a-better-hyper-scale-database-sq-lite-database-per-partition","children":"A Better Hyper-Scale Database: SQLite Database Per Partition"}],"\n",["$","$L20",null,{"src":{"src":"/_next/static/media/sqlite-hyperscale.94d4d0af.png","height":2172,"width":1674,"blurDataURL":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAYAAAAICAMAAADtGH4KAAAACVBMVEUTExMeHBwwJSWzszeQAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAHklEQVR4nGNgYGBkYGRkYGBgAhEMTExgGkpBZLBRAAO4AB2+dkcfAAAAAElFTkSuQmCC","blurWidth":6,"blurHeight":8}}],"\n",["$","p",null,{"children":"Using SQLite with Cloudflare Durable Objects & Turso allows defining databases per entity, effectively replacing partitioning keys."}],"\n",["$","p",null,{"children":"Instead of storing chat logs in a single partition, each chat channel can have its own SQLite database that also includes more tables, like participants and reactions. A sample schema could look like this:"}],"\n",["$","div",null,{"className":"not-prose my-4 rounded-md border group-[.code-group]:my-0 group-[.code-group]:-mt-2 group-[.code-group]:border-none","data-code-group":true,"children":[["$","div",null,{"className":"text-foreground flex items-center justify-between gap-2 border-b p-2 text-xs","children":[["$","div",null,{"className":"text-muted-foreground flex items-center gap-1","children":["$","div",null,{"ref":"$undefined","className":"inline-flex items-center tracking-normal rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 whitespace-nowrap max-w-full overflow-hidden truncate text-foreground","children":"schema.sql"}]}],["$","$L22",null,{"trigger":["$","$L23",null,{"children":["$","button",null,{"className":"group group/button inline-flex items-center justify-center whitespace-nowrap rounded-md font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:z-10 relative aria-disabled:pointer-events-none aria-disabled:opacity-50 disabled:pointer-events-none disabled:opacity-50 hover:bg-accent hover:text-accent-foreground h-7 w-7 text-xs [&_svg]:size-3 gap-1.5","ref":"$undefined","disabled":"$undefined","children":[null,["$","svg",null,{"aria-hidden":"true","focusable":"false","data-prefix":"fas","data-icon":"copy","className":"svg-inline--fa fa-copy ","role":"img","xmlns":"http://www.w3.org/2000/svg","viewBox":"0 0 448 512","style":{},"ref":"$undefined","children":["$","path",null,{"fill":"currentColor","d":"M208 0L332.1 0c12.7 0 24.9 5.1 33.9 14.1l67.9 67.9c9 9 14.1 21.2 14.1 33.9L448 336c0 26.5-21.5 48-48 48l-192 0c-26.5 0-48-21.5-48-48l0-288c0-26.5 21.5-48 48-48zM48 128l80 0 0 64-64 0 0 256 192 0 0-32 64 0 0 48c0 26.5-21.5 48-48 48L48 512c-26.5 0-48-21.5-48-48L0 176c0-26.5 21.5-48 48-48z","style":{}}]}],null]}]}],"content":"Copy code"}]]}],["$","div",null,{"className":"bg-background text-wrap p-2 text-sm","children":["$","$L24",null,{"className":"w-full","children":["$","span",null,{"className":"not-prose code","dangerouslySetInnerHTML":{"__html":"$27"}}]}]}]]}],"\n",["$","p",null,{"children":"From Cloudflare Durable Objects or Turso, this SQLite partition database could be queried like this:"}],"\n",["$","div",null,{"className":"code-group group my-4 rounded-md border pt-2","data-code-group":true,"children":["$","$L28",null,{"defaultValue":"cloudflare_worker.js","children":[["$","div",null,{"className":"flex gap-1 border-b pr-2","children":[["$","$L24",null,{"className":"w-full","viewportProps":{"className":"[&>div]:!table"},"children":["$","$L29",null,{"className":"border-b-0","children":[["$","$L2a","cloudflare_worker.js/.0",{"value":"cloudflare_worker.js","children":"cloudflare_worker.js"}],["$","$L2a","turso.js/.1",{"value":"turso.js","children":"turso.js"}]]}]}],["$","$L22",null,{"trigger":["$","$L23",null,{"children":["$","button",null,{"className":"group group/button inline-flex items-center justify-center whitespace-nowrap rounded-md font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:z-10 relative aria-disabled:pointer-events-none aria-disabled:opacity-50 disabled:pointer-events-none disabled:opacity-50 hover:bg-accent hover:text-accent-foreground h-7 w-7 text-xs [&_svg]:size-3 gap-1.5 text-foreground","ref":"$undefined","disabled":"$undefined","children":[null,["$","svg",null,{"aria-hidden":"true","focusable":"false","data-prefix":"fas","data-icon":"copy","className":"svg-inline--fa fa-copy ","role":"img","xmlns":"http://www.w3.org/2000/svg","viewBox":"0 0 448 512","style":{},"ref":"$undefined","children":["$","path",null,{"fill":"currentColor","d":"M208 0L332.1 0c12.7 0 24.9 5.1 33.9 14.1l67.9 67.9c9 9 14.1 21.2 14.1 33.9L448 336c0 26.5-21.5 48-48 48l-192 0c-26.5 0-48-21.5-48-48l0-288c0-26.5 21.5-48 48-48zM48 128l80 0 0 64-64 0 0 256 192 0 0-32 64 0 0 48c0 26.5-21.5 48-48 48L48 512c-26.5 0-48-21.5-48-48L0 176c0-26.5 21.5-48 48-48z","style":{}}]}],null]}]}],"content":"Copy code"}]]}],[["$","$L2b","cloudflare_worker.js/.0",{"value":"cloudflare_worker.js","children":["$","div",null,{"className":"not-prose my-4 rounded-md border group-[.code-group]:my-0 group-[.code-group]:-mt-2 group-[.code-group]:border-none","data-code-group":true,"children":[null,["$","div",null,{"className":"bg-background text-wrap p-2 text-sm","children":["$","$L24",null,{"className":"w-full","children":["$","span",null,{"className":"not-prose code","dangerouslySetInnerHTML":{"__html":"$2c"}}]}]}]]}]}],["$","$L2b","turso.js/.1",{"value":"turso.js","children":["$","div",null,{"className":"not-prose my-4 rounded-md border group-[.code-group]:my-0 group-[.code-group]:-mt-2 group-[.code-group]:border-none","data-code-group":true,"children":[null,["$","div",null,{"className":"bg-background text-wrap p-2 text-sm","children":["$","$L24",null,{"className":"w-full","children":["$","span",null,{"className":"not-prose code","dangerouslySetInnerHTML":{"__html":"$2d"}}]}]}]]}]}]]]}]}],"\n",["$","$L21",null,{"level":3,"id":"benefits-of-sq-lite-per-partition","children":"Benefits of SQLite-Per-Partition"}],"\n",["$","ul",null,{"children":["\n",["$","li",null,{"children":[["$","strong",null,{"children":"Local ACID transactions"}],": Complex SQL queries can be within each partition without cross-partition complexities."]}],"\n",["$","li",null,{"children":[["$","strong",null,{"children":"Efficient I/O"}],": SQLite enables performing complex queries within the partition with very high performance."]}],"\n",["$","li",null,{"children":[["$","strong",null,{"children":"Leverage existing SQLite extensions"}],": SQLite has a rich ecosystem of existing extensions, such as ",["$","$La",null,{"href":"https://www.sqlite.org/fts5.html","children":"FTS5"}],", ",["$","$La",null,{"href":"https://www.sqlite.org/json1.html","children":"JSON1"}],", ",["$","$La",null,{"href":"https://www.sqlite.org/rtree.html","children":"R*Tree"}],", and ",["$","$La",null,{"href":"https://www.gaia-gis.it/fossil/libspatialite/index","children":"SpatiaLite"}],"."]}],"\n",["$","li",null,{"children":[["$","strong",null,{"children":"Full Power of SQL migrations"}],": SQLite provides the full power of SQL migrations & leveraging existing migrations tools such as Drizzle & Prisma."]}],"\n",["$","li",null,{"children":[["$","strong",null,{"children":"Lazy schema migrations"}],": Changing schema is tricky at scale. Assuming your migrations are lightweight, they can be executed on demand after the SQLite database is opened at the cost of a slightly higher p99 after deploys."]}],"\n"]}],"\n",["$","div",null,{"className":"relative w-full rounded-xl border p-4 my-4 flex gap-3 bg-green-950/20 border-green-700/50","children":[["$","div",null,{"className":"flex-shrink-0 pt-0.5","children":["$","svg",null,{"aria-hidden":"true","focusable":"false","data-prefix":"fas","data-icon":"lightbulb-on","className":"svg-inline--fa fa-lightbulb-on w-5 h-5 text-green-400","role":"img","xmlns":"http://www.w3.org/2000/svg","viewBox":"0 0 640 512","style":{},"ref":"$undefined","children":["$","path",null,{"fill":"currentColor","d":"$2e","style":{}}]}]}],["$","div",null,{"className":"flex-1 prose-invert prose max-w-full w-full text-green-100","children":["$","p",null,{"children":[["$","strong",null,{"children":"Who are the Turso founders?"}]," It's no coincidence that the founders of Turso used to work at ScyllaDB, where they saw firsthand the complexities of large-scale partitioned databases on a daily basis."]}]}]]}],"\n",["$","$L21",null,{"level":2,"id":"where-sq-lite-still-falls-short","children":"Where SQLite Still Falls Short"}],"\n",["$","p",null,{"children":"Despite its benefits, SQLite at scale presents a few challenges:"}],"\n",["$","ul",null,{"children":["\n",["$","li",null,{"children":"Lack of an open-source, self-hosted solution."}],"\n",["$","li",null,{"children":"No built-in cross-database querying, making complex analytics difficult without a dedicated data lake."}],"\n",["$","li",null,{"children":["Limited database tooling, such as SQL browsers, ETL pipelines, monitoring, and backups. ",["$","$La",null,{"href":"https://starbasedb.com/","children":"StarbaseDB"}]," is addressing this for Cloudflare Durable Objects with SQLite."]}],"\n",["$","li",null,{"children":"Non-standard protocols for communicating with SQLite-on-the-server. In contrast, PostgreSQL, MySQL, and Cassandra all have a well standardized wire protocols across all cloud providers that has led to a rich community of tools."}],"\n",["$","li",null,{"children":"There are no case studies like Cassandra & DynamoDB have of using SQLite with this architecture at hyper-scale. This will change with time."}],"\n"]}],"\n",["$","div",null,{"className":"relative w-full rounded-xl border p-4 my-4 flex gap-3 bg-green-950/20 border-green-700/50","children":[["$","div",null,{"className":"flex-shrink-0 pt-0.5","children":["$","svg",null,{"aria-hidden":"true","focusable":"false","data-prefix":"fas","data-icon":"lightbulb-on","className":"svg-inline--fa fa-lightbulb-on w-5 h-5 text-green-400","role":"img","xmlns":"http://www.w3.org/2000/svg","viewBox":"0 0 640 512","style":{},"ref":"$undefined","children":["$","path",null,{"fill":"currentColor","d":"$2f","style":{}}]}]}],["$","div",null,{"className":"flex-1 prose-invert prose max-w-full w-full text-green-100","children":["$","p",null,{"children":["We're shipping an open-source & self-hostable alternative to Cloudflare Durable Objects with SQLite in the near future. Follow us on ",["$","$La",null,{"href":"https://x.com/rivet_gg","children":"X"}],", ",["$","$La",null,{"href":"https://bsky.app/profile/rivet.gg","children":"Bluesky"}],", or ",["$","$La",null,{"href":"https://rivet.gg/discord","children":"Discord"}]," to get notified on updates."]}]}]]}],"\n",["$","$L21",null,{"level":2,"id":"conclusion","children":"Conclusion"}],"\n",["$","p",null,{"children":"SQLite on the server is more than a lightweight solution for small deployments – it's an increasingly viable alternative to traditional partitioned databases. By leveraging SQLite-per-partition solutions like Turso and Durable Objects, developers gain rich SQL capabilities, ACID compliance, and significant operational advantages."}]],["$","$L30",null,{"title":"SQLite-on-the-Server Is Misunderstood: Better At Hyper-Scale Than Micro-Scale"}]]}],["$","aside",null,{"className":"order-2 min-w-0 max-w-xs flex-1 lg:order-3","children":["$","$L31",null,{"tableOfContents":[{"title":"Background","id":"background","children":[{"title":"Why Developers Love SQLite for Micro-Scale Deployments","id":"why-developers-love-sq-lite-for-micro-scale-deployments","children":[]},{"title":"Tools for SQLite-on-the-server","id":"tools-for-sq-lite-on-the-server","children":[]}]},{"title":"Databases at Hyper-Scale Today: Sharded Databases & Partitioning Keys","id":"databases-at-hyper-scale-today-sharded-databases-and-partitioning-keys","children":[{"title":"Benefits of Sharded Databases","id":"benefits-of-sharded-databases","children":[]},{"title":"Challenges with Current Partitioning Solutions","id":"challenges-with-current-partitioning-solutions","children":[]}]},{"title":"Enter SQLite at Scale: Cloudflare Durable Objects & Turso","id":"enter-sq-lite-at-scale-cloudflare-durable-objects-and-turso","children":[{"title":"A Better Hyper-Scale Database: SQLite Database Per Partition","id":"a-better-hyper-scale-database-sq-lite-database-per-partition","children":[]},{"title":"Benefits of SQLite-Per-Partition","id":"benefits-of-sq-lite-per-partition","children":[]}]},{"title":"Where SQLite Still Falls Short","id":"where-sq-lite-still-falls-short","children":[]},{"title":"Conclusion","id":"conclusion","children":[]}]}]}]]}]]}],["$","$L32",null,{"className":"mx-auto w-full mb-8 xl:max-w-[1000px]"}]]
17:[["$","meta","0",{"charSet":"utf-8"}],["$","meta","1",{"name":"viewport","content":"width=device-width, initial-scale=1"}]]
12:null
1a:{"metadata":[["$","title","0",{"children":"SQLite-on-the-Server Is Misunderstood: Better At Hyper-Scale Than Micro-Scale"}],["$","meta","1",{"name":"description","content":"We're Rivet, a new open-source, self-hostable serverless platform. We've been in the weeds with SQLite-on-the-server recently and – boy – do we have a lot of thoughts to share. Give us a star on GitHub, we'll be sharing a lot more about SQLite soon!"}],["$","link","2",{"rel":"author","href":"https://x.com/NathanFlurry/"}],["$","meta","3",{"name":"author","content":"Nathan Flurry"}],["$","meta","4",{"property":"og:title","content":"SQLite-on-the-Server Is Misunderstood: Better At Hyper-Scale Than Micro-Scale"}],["$","meta","5",{"property":"og:description","content":"We're Rivet, a new open-source, self-hostable serverless platform. We've been in the weeds with SQLite-on-the-server recently and – boy – do we have a lot of thoughts to share. Give us a star on GitHub, we'll be sharing a lot more about SQLite soon!"}],["$","meta","6",{"property":"og:image","content":"http://localhost:3000/_next/static/media/image.f86d756a.png"}],["$","meta","7",{"property":"og:image:width","content":"2334"}],["$","meta","8",{"property":"og:image:height","content":"1024"}],["$","meta","9",{"property":"og:type","content":"article"}],["$","meta","10",{"property":"article:published_time","content":"2025-02-16T00:00:00.000Z"}],["$","meta","11",{"property":"article:author","content":"Nathan Flurry"}],["$","meta","12",{"property":"article:section","content":"Technical"}],["$","meta","13",{"name":"twitter:card","content":"summary_large_image"}],["$","meta","14",{"name":"twitter:site","content":"@rivetgg"}],["$","meta","15",{"name":"twitter:title","content":"SQLite-on-the-Server Is Misunderstood: Better At Hyper-Scale Than Micro-Scale"}],["$","meta","16",{"name":"twitter:description","content":"We're Rivet, a new open-source, self-hostable serverless platform. We've been in the weeds with SQLite-on-the-server recently and – boy – do we have a lot of thoughts to share. Give us a star on GitHub, we'll be sharing a lot more about SQLite soon!"}],["$","meta","17",{"name":"twitter:image","content":"http://localhost:3000/_next/static/media/image.f86d756a.png"}],["$","meta","18",{"name":"twitter:image:width","content":"2334"}],["$","meta","19",{"name":"twitter:image:height","content":"1024"}]],"error":null,"digest":"$undefined"}
15:{"metadata":"$1a:metadata","error":null,"digest":"$undefined"}
1f:["$","ul",null,{"className":"text-muted-foreground hidden list-disc pl-5 text-sm lg:block","children":[["$","li","2025-07-01-introducing-rivetkit-backend-libraries-that-replace-saas",{"className":"py-1","children":["$","$La",null,{"href":"/changelog/2025-07-01-introducing-rivetkit-backend-libraries-that-replace-saas","children":"Introducing RivetKit: Backend Libraries That Replace SaaS"}]}],["$","li","2025-06-24-cloudflare-containers-vs-rivet-containers-vs-fly-machines",{"className":"py-1","children":["$","$La",null,{"href":"/blog/2025-06-24-cloudflare-containers-vs-rivet-containers-vs-fly-machines","children":"Container Platform Comparison: Cloudflare Containers vs Rivet Containers vs Fly Machines"}]}],["$","li","2025-06-10-rivet-functions-launch",{"className":"py-1","children":["$","$La",null,{"href":"/changelog/2025-06-10-rivet-functions-launch","children":"Rivet Functions Launch"}]}]]}]
